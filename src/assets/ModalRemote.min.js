function ModalRemote(t){this.defaults={okLabel:yii.t("app","OK"),cancelLabel:yii.t("app","Cancel"),loadingTitle:yii.t("app","Loading...")},this.modal=$(t),this.dialog=$(t).find(".modal-dialog"),this.header=$(t).find(".modal-header"),this.content=$(t).find(".modal-body"),this.footer=$(t).find(".modal-footer"),this.loadingContent='<div class="progress progress-striped active" style="margin-bottom:0;"><div class="progress-bar" style="width: 100%"></div></div>',this.show=function(){this.clear(),$(this.modal).modal("show")},this.hide=function(){$(this.modal).modal("hide")},this.toggle=function(){$(this.modal).modal("toggle")},this.clear=function(){$(this.modal).find(".modal-title").remove(),$(this.content).html(""),$(this.footer).html("")},this.setSize=function(t){let o=$(this.dialog);o.removeClass("modal-xl"),o.removeClass("modal-lg"),o.removeClass("modal-sm"),"extra-large"===t?o.addClass("modal-xl"):"large"===t?o.addClass("modal-lg"):"small"===t?o.addClass("modal-sm"):"normal"!==t&&console.warn("Undefined size "+t)},this.getSizeClassName=function(){let t=$(this.dialog);return t.hasClass("modal-xl")?"modal-xl":t.hasClass("modal-lg")?"modal-lg":t.hasClass("modal-sm")?"modal-sm":""},this.setCustomClass=function(t){let o=this.getSizeClassName(),a=$(this.dialog);a.removeClass(),a.addClass("modal-dialog"),a.addClass(o),a.addClass(t)},this.setHeader=function(t){$(this.header).html(t)},this.setContent=function(t){$(this.content).html(t)},this.setFooter=function(t){$(this.footer).html(t)},this.setTitle=function(t){$(this.header).find("h4.modal-title").remove(),$(this.header).prepend('<h4 class="modal-title">'+t+"</h4>")},this.hideCloseButton=function(){$(this.header).find("button.close").hide()},this.showCloseButton=function(){$(this.header).find("button.close").show()},this.displayLoading=function(){this.setContent(this.loadingContent),this.setTitle(this.defaults.loadingTitle)},this.addFooterButton=function(t,o,a,s){buttonElm=document.createElement("button"),buttonElm.setAttribute("type",null===o?"button":o),buttonElm.setAttribute("class",null===a?"btn btn-primary":a),buttonElm.innerHTML=t;var e=this;$(this.footer).append(buttonElm),null!==s&&$(buttonElm).click(function(t){s.call(e,this,t)})},this.doRemote=function(t,o,a,s,e){var i=this;$.ajax({url:t,method:o,data:e,async:!1,beforeSend:function(){(function(){this.show(),this.displayLoading()}).call(i)},error:function(t){(function(t){this.setTitle(t.status+t.statusText),this.setContent(t.responseText),this.addFooterButton(yii.t("app","Close"),"button","btn btn-secondary",function(t,o){this.hide()})}).call(i,t)},success:function(t){(function(t,o,a){void 0!==t.forceReload&&t.forceReload&&("true"==t.forceReload?$.pjax.reload({container:"#crud-datatable-pjax"}):$.pjax.reload({container:t.forceReload}));if(void 0!==t.forceClose&&t.forceClose)return void this.hide();void 0!==t.size?this.setSize(t.size):null!==o&&this.setSize(o);void 0!==t.customClass?this.setCustomClass(t.customClass):null!==a&&this.setCustomClass(a);void 0!==t.title&&this.setTitle(t.title);void 0!==t.content&&this.setContent(t.content);void 0!==t.footer&&this.setFooter(t.footer);void 0!==$(this.content).find("form")[0]&&this.setupFormSubmit($(this.content).find("form")[0],$(this.footer).find('[type="submit"]')[0])}).call(i,t,a,s)},contentType:!1,cache:!1,processData:!1})},this.setupFormSubmit=function(t,o){if(void 0===o)console.warn("Modal has form but does not have a submit button");else{var a=this;$(o).click(function(o){var s;s=window.FormData?new FormData($(t)[0]):$(t).serializeArray(),a.doRemote($(t).attr("action"),$(t).hasAttr("method")?$(t).attr("method"):"GET",null,null,s)})}},this.confirmModal=function(t,o,a,s,e,i,n,l,d){this.show(),this.setSize(e),this.setCustomClass(i),void 0!==t&&this.setTitle(t),this.setContent('<form id="ModalRemoteConfirmForm">'+o);var r=this;!1!==a&&this.addFooterButton(void 0===a?this.defaults.okLabel:a,"submit","btn btn-primary",function(){var t;window.FormData?(t=new FormData($("#ModalRemoteConfirmForm")[0]),void 0!==d&&d&&t.append("pks",d.join())):(t=$("#ModalRemoteConfirmForm"),void 0!==d&&d&&(t.pks=d),t=t.serializeArray()),r.doRemote(n,l,null,null,t)}),this.addFooterButton(void 0===s?this.defaults.cancelLabel:s,"button","btn btn-secondary pull-left",function(){this.hide()})},this.open=function(t,o){$(t).hasAttr("data-confirm-title")||$(t).hasAttr("data-confirm-message")?this.confirmModal($(t).attr("data-confirm-title"),$(t).attr("data-confirm-message"),!$(t).attr("data-confirm-alert")&&$(t).attr("data-confirm-ok"),$(t).attr("data-confirm-cancel"),$(t).hasAttr("data-modal-size")?$(t).attr("data-modal-size"):"normal",$(t).hasAttr("data-modal-class")?$(t).attr("data-modal-class"):"",$(t).hasAttr("href")?$(t).attr("href"):$(t).attr("data-url"),$(t).hasAttr("data-request-method")?$(t).attr("data-request-method"):"GET",o):this.doRemote($(t).hasAttr("href")?$(t).attr("href"):$(t).attr("data-url"),$(t).hasAttr("data-request-method")?$(t).attr("data-request-method"):"GET",$(t).hasAttr("data-modal-size")?$(t).attr("data-modal-size"):"normal",$(t).hasAttr("data-modal-class")?$(t).attr("data-modal-class"):"",o)}}jQuery.fn.hasAttr=function(t){return void 0!==this.attr(t)};